const $=a=>document.querySelector(a),$$=a=>document.querySelectorAll(a),setPageOverflow=a=>{document.documentElement.style.overflow=a?"hidden":"",document.body.style.overflow=a?"hidden":""},setTestimonialArrows=a=>{$$(".testimonial-arrow").forEach(b=>{b.style.pointerEvents=a?"auto":"none"})};function initTooltips(){$$("abbr[title]").forEach(a=>{const b=a.getAttribute("title");if(!b)return;let c=null;const d=()=>(c=document.createElement("div"),c.className="floating-tooltip",c.textContent=b,document.body.appendChild(c),c),e=()=>{if(!c)return;const b=a.getBoundingClientRect(),d=c.getBoundingClientRect(),e=window.scrollY+b.top-d.height-10,f=Math.max(10,Math.min(window.scrollX+b.left+(b.width-d.width)/2,window.innerWidth-d.width-10));c.style.top=`${e}px`,c.style.left=`${f}px`};a.addEventListener("mouseenter",()=>{a.setAttribute("title",""),c=d(),e()}),a.addEventListener("mousemove",e),a.addEventListener("mouseleave",()=>{a.setAttribute("title",b),c&&(c.remove(),c=null)})})}function initSidebar(){function a(){f.forEach(a=>{const b=a.querySelector("ul");if(!b)return;const c=a.querySelector("a");if(!c)return;if(c.querySelector(".submenu-indicator"))return;const d=document.createElement("span");d.className="submenu-indicator",d.setAttribute("role","button"),d.setAttribute("tabindex","0"),d.setAttribute("aria-expanded","false"),d.setAttribute("aria-label","Toggle submenu"),d.innerHTML="<svg width=\"12\" height=\"8\" viewBox=\"0 0 12 8\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M1 1l5 5 5-5\" stroke=\"currentColor\" stroke-width=\"1.5\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>",c.appendChild(d);const f=b=>{b.preventDefault(),b.stopPropagation(),a.classList.toggle("open");const c=a.classList.contains("open");d.setAttribute("aria-expanded",!!c+"")};d.addEventListener("click",f),d.addEventListener("keydown",a=>{("Enter"===a.key||" "===a.key||"Spacebar"===a.key)&&(a.preventDefault(),f(a))})})}function b(){f.forEach(a=>{if(g.has(a))return;const b=()=>a.classList.add("open"),c=()=>a.classList.remove("open");a.addEventListener("mouseenter",b),a.addEventListener("mouseleave",c),g.set(a,{onEnter:b,onLeave:c})}),e._desktopMouseLeave||(e._desktopMouseLeave=()=>f.forEach(a=>a.classList.remove("open")),e.addEventListener("mouseleave",e._desktopMouseLeave))}function c(){g.forEach((a,b)=>{b.removeEventListener("mouseenter",a.onEnter),b.removeEventListener("mouseleave",a.onLeave)}),g.clear(),e._desktopMouseLeave&&(e.removeEventListener("mouseleave",e._desktopMouseLeave),delete e._desktopMouseLeave),f.forEach(a=>{a.classList.remove("open");const b=a.querySelector(".submenu-indicator");b&&b.setAttribute("aria-expanded","false")})}function d(){768<window.innerWidth?b():c()}const e=$(".sidebar");if(!e)return;const f=e.querySelectorAll("li");a();const g=new Map;d(),window.addEventListener("resize",()=>{clearTimeout(e._resizeTimeout),e._resizeTimeout=setTimeout(d,120)}),e.addEventListener("click",a=>{const b=a.target.closest("a");if(b&&!(768<window.innerWidth)){const c=b.closest("li");if(c){const b=c.querySelector("ul");if(b){a.preventDefault(),c.classList.toggle("open");const b=c.querySelector(".submenu-indicator");b&&b.setAttribute("aria-expanded",c.classList.contains("open")+"")}else if(window.closeMobileMenu)window.closeMobileMenu();else{document.body.classList.remove("menu-open");const a=document.querySelector(".menu-toggle");a&&a.setAttribute("aria-expanded","false");const b=document.querySelector(".menu-overlay");b&&b.remove(),document.documentElement.style.overflow="",document.body.style.overflow=""}}}})}function initMobileMenu(){function a(){document.body.classList.remove("menu-open");try{b.setAttribute("aria-expanded","false")}catch(a){}const a=document.querySelector(".menu-overlay");a&&a.remove(),setPageOverflow(!1)}const b=document.querySelector(".menu-toggle"),c=document.querySelector(".sidebar");if(!b||!c)return;b.addEventListener("keydown",a=>{("Enter"===a.key||" "===a.key||"Spacebar"===a.key)&&(a.preventDefault(),b.click())});const d=()=>{let b=document.querySelector(".menu-overlay");return b||(b=document.createElement("div"),b.className="menu-overlay",document.body.appendChild(b),b.addEventListener("click",a)),b};window.closeMobileMenu=a,b.addEventListener("click",()=>{const c=document.body.classList.toggle("menu-open");b.setAttribute("aria-expanded",c?"true":"false"),c?(d(),setPageOverflow(!0)):a()}),document.addEventListener("keydown",b=>{"Escape"===b.key&&document.body.classList.contains("menu-open")&&a()}),document.addEventListener("click",b=>{if(!document.body.classList.contains("menu-open"))return;const c=!!b.target.closest&&b.target.closest(".sidebar"),d=!!b.target.closest&&b.target.closest(".menu-toggle");if(!c&&!d){try{b.preventDefault(),b.stopPropagation()}catch(a){}a()}},!0),window.addEventListener("resize",()=>{768<window.innerWidth&&document.body.classList.contains("menu-open")&&a()})}function initSmoothScroll(){var a=Math.max;$$("a[href^=\"#\"]").forEach(b=>{b.addEventListener("click",function(b){const c=this.getAttribute("href");if(c&&"#"!==c){const d=c.slice(1);if(d){const c=document.getElementById(d);if(c){b.preventDefault();const e=768>=window.innerWidth?40:0,f=c.getBoundingClientRect().top+window.scrollY,g=a(0,f-e);window.scrollTo({top:g,behavior:"smooth"}),history.pushState&&history.pushState(null,"",`#${d}`)}}}})})}const testimonials=[{text:"Nem\u016F\u017Eu si vynachv\xE1lit Pana Lauera z mnoha d\u016Fvod\u016F, jako je rychlost, p\u0159ipravenost a neskute\u010Dn\xE1 ochota.",source:"Andy V.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"},{text:"Obrovsk\xE1 spokojenost s panem Lauerem. Je\u0161t\u011B jednou velk\xE9 D\xCDKY za pomoc se statistikou a v\u0161em moc doporu\u010Duji.",source:"Vendula K.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"},{text:"Pokud pot\u0159ebujete poradit se statistikou v r\xE1mci sv\xE9 vysoko\u0161kolsk\xE9 pr\xE1ce ur\u010Dit\u011B se nev\xE1hejte obr\xE1tit na pana Michala.",source:"Petra M.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"},{text:"D\xEDky panu Lauerovi se mi poda\u0159ilo \xFAsp\u011B\u0161n\u011B spo\u010D\xEDtat \u0159adu p\u0159\xEDklad\u016F a usp\u011Bt u zkou\u0161ky na prvn\xED pokus, co\u017E pova\u017Euji za z\xE1zrak:)",source:"Andrea D.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"},{text:"Pana Michala na 100 % doporu\u010Duji. Velk\xE1 pomoc p\u0159i DP. Je vid\u011Bt, \u017Ee statistice opravdu rozum\xED a hlavn\u011B ji dok\xE1\u017Ee vysv\u011Btlit.",source:"Mgr. I.",url:"https://www.doucuji.eu/381550-doucovani-srozumitelne-a-lidske-doucovani-statistiky-a-datove-analyzy"}];function initTestimonialCarousel(){const a=$(".testimonial-carousel");if(!a)return;const b=a.querySelector(".testimonial-cards"),c=a.querySelector(".testimonial-arrow-left"),d=a.querySelector(".testimonial-arrow-right");if(!b||!c||!d)return;if(a._initialized){const b=()=>768>=window.innerWidth?1:1024>=window.innerWidth?2:3;return a._visibleCards=b(),void a._renderCards()}a._initialized=!0,a._totalCards=testimonials.length,a._currentPosition=0;const e=()=>768>=window.innerWidth?1:1024>=window.innerWidth?2:3;a._visibleCards=e(),a._renderCards=function(){const c=a._totalCards||testimonials.length,d="number"==typeof a._currentPosition?a._currentPosition:0,e=a._visibleCards||1;b.innerHTML="";for(let a=0;a<e;a++){const e=(d+a)%c,f=testimonials[e],g=document.createElement("div");g.className="testimonial-card",g.innerHTML=`
        <div class="testimonial-text">${f.text}</div>
        <div class="testimonial-bottom-row">
          <div class="testimonial-number">${e+1}</div>
          <div class="testimonial-source"> 
            <a href="${f.url}" target="_blank" rel="noopener" 
               title="Source" aria-label="Source">
               ${f.source}
            </a> ðŸ”—
          </div>
        </div>
      `,b.appendChild(g)}},c.addEventListener("click",()=>{a._currentPosition=(a._currentPosition-1+a._totalCards)%a._totalCards,a._renderCards()}),d.addEventListener("click",()=>{a._currentPosition=(a._currentPosition+1)%a._totalCards,a._renderCards()}),a._resizeHandler=()=>{const b=e();b!==a._visibleCards&&(a._visibleCards=b,a._currentPosition%=a._totalCards,a._renderCards())};let f;window.addEventListener("resize",()=>{clearTimeout(f),f=setTimeout(a._resizeHandler,250)}),a._renderCards()}window.addEventListener("pageshow",a=>{const b=document.querySelector(".testimonial-carousel");if(b)if(b._initialized){const a=768>=window.innerWidth?1:1024>=window.innerWidth?2:3;b._visibleCards=a,b._renderCards()}else initTestimonialCarousel()});function initLightbox(){const a=$$(".gallery-link"),b=$("#lightbox");if(!a.length||!b)return;const c=b.querySelector(".lightbox-img"),d=b.querySelector(".lightbox-thumbnails"),e=b.querySelector(".lightbox-caption a"),f=b.querySelector(".lightbox-close"),g=b.querySelector(".lightbox-prev"),h=b.querySelector(".lightbox-next");let i=0;const j=()=>{const b=a[i],f=b.querySelector("img");c.src=f.src,c.alt=f.alt,e.href=f.dataset.source||f.src,d.querySelectorAll("img").forEach((a,b)=>{a.classList.toggle("active",b===i)})};a.forEach((a,c)=>{const e=a.querySelector("img"),f=document.createElement("img");f.src=e.src,f.alt=e.alt,f.dataset.index=c,f.addEventListener("click",()=>{i=c,j()}),d.appendChild(f),a.addEventListener("click",a=>{a.preventDefault(),i=c,j(),b.classList.add("show"),document.body.style.overflow="hidden"})}),g?.addEventListener("click",()=>{i=(i-1+a.length)%a.length,j()}),h?.addEventListener("click",()=>{i=(i+1)%a.length,j()});const k=()=>{b.classList.remove("show"),document.body.style.overflow=""};f?.addEventListener("click",k),b.addEventListener("click",a=>{a.target===b&&k()}),document.addEventListener("keydown",a=>{if(b.classList.contains("show"))switch(a.key){case"Escape":k();break;case"ArrowLeft":g?.click();break;case"ArrowRight":h?.click()}})}function initLazyLoading(){if("IntersectionObserver"in window){const a=new IntersectionObserver((a,b)=>{a.forEach(a=>{if(a.isIntersecting){const c=a.target;c.src=c.dataset.src||c.src,c.classList.remove("lazy"),b.unobserve(c)}})});$$("img[loading=\"lazy\"]").forEach(b=>{a.observe(b)})}}const EMAIL_USER="hello",EMAIL_DOMAIN="lauer.cz",EMAIL_FULL="hello@"+EMAIL_DOMAIN;function createMailtoAnchor(b){const c=document.createElement("a");return c.href="mailto:"+b,c.textContent=b,c.title=b,c.target="_self",c.rel="nofollow",c.setAttribute("aria-label","Contact Michal Lauer"),c}function revealEmail(a,b){const c="mailto:"+EMAIL_FULL;try{window.location.href=c}catch(a){window.open(c)}}function initEmailPlaceholders(){document.querySelectorAll(".mail-placeholder").forEach(a=>{if(a.dataset.initialized)return;a.dataset.initialized="1";const b=a.dataset.text||"Contact",c=a.dataset.variant||"",d=/\bnavbar-contact\b/.test(c);let f;if(d){if(f=document.createElement("button"),f.type="button",f.className="reveal-email-btn",c&&c.split(/\s+/).forEach(a=>{a&&f.classList.add(a)}),/\bsidebar-contact\b/.test(c)&&f.classList.add("sidebar-contact"),/\b(header-contact|navbar-contact)\b/.test(c)){const a=document.createElement("i");a.className="fas fa-envelope",a.setAttribute("aria-hidden","true"),f.appendChild(a),f.appendChild(document.createTextNode(b))}else f.textContent=b;f.setAttribute("aria-label","Contact Michal Lauer"),f.addEventListener("click",function(){revealEmail(a,f)})}else{if(f=document.createElement("a"),f.href="#",f.className="reveal-email-btn",c&&c.split(/\s+/).forEach(a=>{a&&f.classList.add(a)}),/\bsidebar-contact\b/.test(c)&&f.classList.add("sidebar-contact"),/\b(header-contact|navbar-contact)\b/.test(c)){const a=document.createElement("i");a.className="fas fa-envelope",a.setAttribute("aria-hidden","true"),f.appendChild(a),f.appendChild(document.createTextNode(b))}else f.textContent=b;f.setAttribute("role","button"),f.setAttribute("aria-label","Contact Michal Lauer"),f.addEventListener("click",function(b){b.preventDefault(),revealEmail(a,f)}),f.addEventListener("keydown",function(a){("Enter"===a.key||" "===a.key||"Spacebar"===a.key)&&(a.preventDefault(),f.click())})}a.appendChild(f)})}document.addEventListener("DOMContentLoaded",()=>{initTooltips(),initSidebar(),initMobileMenu(),initSmoothScroll(),initTestimonialCarousel(),initLightbox(),initEmailPlaceholders(),initLazyLoading()}),document.addEventListener("visibilitychange",()=>{document.hidden?$$(".testimonial-arrow").forEach(a=>{a.style.pointerEvents="none"}):$$(".testimonial-arrow").forEach(a=>{a.style.pointerEvents="auto"})});